---
title: 'Big changes I made to ScuffedMDB and why I made them.'
publishedAt: '2021-08-23'
summary: "I have made a lot of changes to my movie rating site ScuffedMDB over the last couple of months, here's why."
tags: ['ScuffedMDB', 'Web Development', 'Next.JS', 'Chakra-UI', 'Movie Rating']
by: { name: 'Michael Hall', avatar: '/static/images/profile.jpeg' }
image: '/static/images/blog/movie-website-experience/banner.png'
published: false
---

# Introduction

About two months ago I wrote a blog post about my experience with [ScuffedMDB](https://smdb.michael-hall.me) and how I made it, since then I have made some pretty big changes, and I wanted to share some of them with you.

As I explained in my previous blog post, I made this website to rate movies with my friends, without bloated or annoying UX features, it does what it says on the tin. It has come to the point where it is open source and takes less than fifteen minutes to setup your own instance, if you want to do so there are instructions on the [repo](https://github.com/mah51/scuffedmdb/#README). As it is hosted on the brilliant [Vercel](https://vercel.com) platform, it is free to use and hosting it yourself is a breeze.

# User Experience

When weighing up my changes, I decided to highlight the UX changes first, as these are what I really care about with this site. I wanted to make it as simple to use as possible.

## Say no to modals

On the original site, there was one main home page, and then three individual modals, one to add movies, one to add reviews, and one to see the details of a selected movie. I originally liked this to keep the website simple, but after I posted it to reddit I had people telling me to remove the modals, as it was a UX nightmare (They weren't wrong). So I did!

Adding a movie and adding a review are simple tasks that can use modals, however displaying all of the data from a movie in a modal was proving difficult. So I made a new page, with an endpoint of `/movie/:id`, which displays the details of a movie.

<Image
  border
  alt={'New movie details page'}
  src={'/static/images/blog/scuffedmdb-progress/details-page.png'}
  width={1920}
  height={1080}
/>

I am happy how this page turned out, and I am able to display a lot more information about the movie in a user friendly way.

## Editing reviews made easier

Another big UX improvement is related to editing reviews, previously there was no 'editing' state while writing reviews, just if you tried to add a new one it would just overwrite the old one. Now editing a review pre-populates the form with the old data which is significantly easier.

<Image
  src='/static/images/blog/scuffedmdb-progress/review-editing.png'
  ratio={476 / 441}
  chakraWidth='50%'
  layout='fill'
  border
  alt='Editing a review with autofill'
/>

<Aside type='neutral' title='Allowing modal to be opened by any component'>
  To allow other components to open the review modal and set which movie is being editited I had to
  use React's `useContext` function, which is works exactly how I wanted it to. However it was a new
  feature to me, so I had to do some googling.

```jsx:utils/ModalContext.ts

export const ReviewModalContext = React.createContext<ReviewContext>({
  isOpen: false,
  onOpen: () => {},
  onClose: () => {},
  movie: null,
  setMovie: () => {},
});

```

And the values of the context are initialized in the `pages/_app` component.

```jsx:pages/_app.tsx
function MyApp({ Component, pageProps }: AppProps): React.ReactChild {
  const { onOpen, onClose, isOpen } = useDisclosure();
  const [movie, setMovie] = useState<SerializedMovieType<
    ReviewType<PopulatedUserType>[]
  > | null>(null);

  return (
      <ReviewModalContext.Provider
        value={{ isOpen, onOpen, onClose, movie, setMovie }}
      >
        <Component {...pageProps} />
      </ReviewModalContext.Provider>
  )
}
```

This then allows me to utilise the `useContext` function to open, close, or set the movie for the modal.

```jsx
import { useContext } from 'react';
import { ReviewModalContext } from './utils/ModalContext';

function SomeComponent() {
  const { onOpen, onClose, isOpen, setMovie } = useContext(ReviewModalContext);

  return <Button onClick={onClose}>Close modal!</Button>;
}
```

</Aside>

## Changing authentication provider

Whilst this doesn't initially seem like a UX problem, the old auth I was using was a botched together from some code I found online. This caused a few problems, such as the user being logged out every time they closed the browser, and my understanding of JWT tokens and cookies is pretty minimal so I decided to switch to next-auth.

This basically handles all of the authentication, and was very simple to configure the basic functionality, however I did struggle extending properties on the user component.

# Performance

## Using next/image component
